swagger: '2.0'
info:
  description: This is the API documentation for the COP 4331 Group 6 Spring 2025 Small Project Contact Manager
  version: 1.0.0
  title: Contact Manager
  contact:
    email: lu097697@ucf.edu
    email: pr438045@ucf.edu
  license:
    name: Apache 2.0
    url: http://www.apache.org/licenses/LICENSE-2.0.html

paths:
  /php/login.php:
    post:
      tags:
        - Users
      summary: Logs user into the contact manager
      operationId: doLogin
      description: Logs user into the contact manager
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - in: body
          name: loginItem
          description: Login
          required: true
          schema:
            $ref: '#/definitions/Login'
      responses:
        200:
          description: Successful login
          schema:
            type: object
            properties:
              id:
                type: integer
                example: 1
              firstName:
                type: string
                example: "Sam"
              lastName:
                type: string
                example: "Hill"
              error:
                type: string
                example: ""
        401:
          description: Unauthorized - Invalid username or password
        404:
          description: No matching user found
        500:
          description: Internal server error

  /php/createAccount.php:
    post:
      tags:
        - Users
      summary: Creates a new user account
      operationId: createAccount
      description: Registers a new user in the contact manager
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - in: body
          name: accountItem
          description: User account details
          required: true
          schema:
            $ref: '#/definitions/CreateAccount'
      responses:
        200:
          description: Account successfully created
        400:
          description: Bad request - Missing required fields
        409:
          description: Conflict - User already exists
        500:
          description: Internal server error

  /php/searchContact.php:
    post:
      tags:
        - Contacts
      summary: Searches for contacts
      operationId: searchContact
      description: Searches for contacts in the database based on first and/or last name.
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - in: body
          name: searchItem
          description: Contact search criteria
          required: true
          schema:
            $ref: '#/definitions/SearchContact'
      responses:
        200:
          description: Successful search
          schema:
            type: object
            properties:
              contacts:
                type: array
                items:
                  type: object
                  properties:
                    ID:
                      type: integer
                      example: 5
                    FirstName:
                      type: string
                      example: "Sam"
                    LastName:
                      type: string
                      example: "Hill"
                    Phone:
                      type: string
                      example: "123-456-7890"
                    Email:
                      type: string
                      example: "sam.hill@gmail.com"
        400:
          description: Bad request - Missing required fields
        404:
          description: No matching contacts found
        500:
          description: Internal server error

  /php/createContact.php:
    post:
      tags:
        - Contacts
      summary: Creates a new contact
      operationId: createContact
      description: Inserts a new contact into the database
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - in: body
          name: contactItem
          description: Contact data for creation
          required: true
          schema:
            $ref: '#/definitions/CreateContact'
      responses:
        200:
          description: Contact created successfully
        400:
          description: Bad request - Missing required fields
        500:
          description: Internal server error

  /php/deleteContact.php:
    post:
      tags:
        - Contacts
      summary: Deletes a contact
      operationId: deleteContact
      description: Deletes a contact based on firstName, lastName, phone, email, and userId
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - in: body
          name: contactItem
          description: Contact identifying info
          required: true
          schema:
            $ref: '#/definitions/DeleteContact'
      responses:
        200:
          description: Contact deleted successfully
        404:
          description: No matching contact found for this user
        400:
          description: Bad request - Missing required fields
        500:
          description: Internal server error

  /php/updateContact.php:
    post:
      tags:
        - Contacts
      summary: Updates a contact
      operationId: updateContact
      description: Updates an existing contact's details based on the provided ID and userId
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - in: body
          name: contactItem
          description: Contact data to update
          required: true
          schema:
            $ref: '#/definitions/UpdateContact'
      responses:
        200:
          description: Contact updated successfully
        404:
          description: No matching contact or no changes made
        400:
          description: Bad request - Missing required fields
        500:
          description: Internal server error

definitions:
  Login:
    type: object
    required:
      - login
      - password
    properties:
      login:
        type: string
        example: "SamH"
      password:
        type: string
        example: "Test"

  CreateAccount:
    type: object
    required:
      - firstName
      - lastName
      - username
      - password
    properties:
      firstName:
        type: string
        example: "Sam"
      lastName:
        type: string
        example: "Hill"
      username:
        type: string
        example: "SamH"
      password:
        type: string
        example: "Test"

  SearchContact:
    type: object
    required:
      - userId
    properties:
      userId:
        type: integer
        example: 1
      firstName:
        type: string
        example: "Sam"
      lastName:
        type: string
        example: "Hill"

  CreateContact:
    type: object
    required:
      - firstName
      - lastName
      - phone
      - email
      - userId
    properties:
      firstName:
        type: string
        example: "Sam"
      lastName:
        type: string
        example: "Hill"
      phone:
        type: string
        example: "111-111-1111"
      email:
        type: string
        example: "sam.hill@email.com"
      userId:
        type: integer
        example: 1

  DeleteContact:
    type: object
    required:
      - firstName
      - lastName
      - phone
      - email
      - userId
    properties:
      firstName:
        type: string
        example: "Sam"
      lastName:
        type: string
        example: "Hill"
      phone:
        type: string
        example: "111-111-1111"
      email:
        type: string
        example: "sam.hill@email.com"
      userId:
        type: integer
        example: 1

  UpdateContact:
    type: object
    required:
      - id
      - firstName
      - lastName
      - phone
      - email
      - userId
    properties:
      id:
        type: integer
        example: 1
      firstName:
        type: string
        example: "Sam"
      lastName:
        type: string
        example: "Hill"
      phone:
        type: string
        example: "111-111-1111"
      email:
        type: string
        example: "sam.hill@email.com"
      userId:
        type: integer
        example: 2

host: cop-4331-spring2025-6.xyz
basePath: /
schemes:
  - http
